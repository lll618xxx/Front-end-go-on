(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{326:function(t,s){t.exports="data:image/png;base64,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YL63N65evfrM26horPz+++9jZdhKNlYmagAMOaJaMjU1RXBwMJycnDBv3jyk7kut8XMfbqwcGxfLxspEDYTTlUR1NG7cOPTp0wchISE4knEECxYsgInJ4xs9s7EyUePhmRxRPejcuTNiYmJgZmYGNzc3nD1bvdHz3bt3ERwczMbKRI2IIUdUT/T19eHh4YFFixZh8eLF2Lp1K8rKygAAp06dgkajQdduXdlYmagRcbqSqJ4NGjQI8fHxCAsLQ0ZGBoYPH47ExEQsWbKEfSeJGhlDjqgBtG7dGu+99x6SkpKQkZGB+Ph4tGrVSttlEekchhxRA5o8eTImT56s7TKIdBavyRERkWIx5IiISLEYckREpFgMOSIiUiyGHBERKRZDjoiIFIshR0REisWQIyIixWLIERGRYjHkiIhIsRhyRESkWE2ud6VKpYK9vb22y2gSVCqVtksgot/x2FSuuR2XVCIi2i6CiIioIXC6koiIFIshR0REisWQIyIixWLIERGRYjHkiIhIsRhyRESkWAw5IiJSLIYcEREpFkOOiIgUiyFHRESKxZAjIiLFYsgREZFiMeSIiEixGHJERKRYDDkiIlIshhwRESkWQ46IiBSLIUdERIrFkCMiIsViyBERkWIx5IiISLEYckREpFgMOSIiUiyGHBERKRZDjoiIFIshR0REisWQIyIixWLIERGRYjHkiIhIsRhyRESkWAw5IiJSLIYcEREpFkOOiIgUiyFHRESKxZAjIiLFYsgREZFiMeSIiEixGHJERKRYDDkiIlIshhwRESkWQ46IiBSLIUdERIrFkCMiIsViyBERkWL9H5/efgO5zwIjAAAAAElFTkSuQmCC"},327:function(t,s,a){t.exports=a.p+"assets/img/native_url.764aba50.png"},328:function(t,s,a){t.exports=a.p+"assets/img/native_h5.00f048b2.png"},329:function(t,s,a){t.exports=a.p+"assets/img/56d66a02e2d44bd6ac2d5677df1b0fe7_tplv-k3u1fbpfcp-zoom-1.b8ab176e.png"},330:function(t,s,a){t.exports=a.p+"assets/img/5f02a8465aa54ccd9d0bf3f78b5f883b_tplv-k3u1fbpfcp-zoom-1.e496e552.png"},397:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1、项目踩坑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、项目踩坑"}},[t._v("#")]),t._v(" 1、项目踩坑")]),t._v(" "),s("h3",{attrs:{id:"_1、华为荣耀-自带浏览器-position-fixed-底部被工具栏遮挡-解决办法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、华为荣耀-自带浏览器-position-fixed-底部被工具栏遮挡-解决办法"}},[t._v("#")]),t._v(" 1、华为荣耀 自带浏览器 position:fixed 底部被工具栏遮挡 解决办法")]),t._v(" "),s("p",[t._v("head中添加")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("x5-fullscreen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2、vue数据变化-视图层没变化-数据强制更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、vue数据变化-视图层没变化-数据强制更新"}},[t._v("#")]),t._v(" 2、vue数据变化，视图层没变化， 数据强制更新")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$forceUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"_2、h5和app的webview交互"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、h5和app的webview交互"}},[t._v("#")]),t._v(" 2、H5和App的Webview交互")]),t._v(" "),s("h3",{attrs:{id:"_2-1、h5通过ua判断是否在webview环境-追加ua"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、h5通过ua判断是否在webview环境-追加ua"}},[t._v("#")]),t._v(" 2.1、H5通过UA判断是否在webview环境（追加UA）")]),t._v(" "),s("p",[t._v("web页面通过脚本能够很容易的拿到浏览器的ua属性，那么在app启动的时候，自定义添加一个ua属性，那么web页面就能够根据这个自定义的ua属性，轻而易举的判断出是否在app内了。")]),t._v(" "),s("h3",{attrs:{id:"_2-2、js和native交互-jsbridge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、js和native交互-jsbridge"}},[t._v("#")]),t._v(" 2.2、JS和Native交互（JSBridge）")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://sevody.github.io/2019/11/10/jsbridge-mechanisms/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Hybrid APP 即混合模式开发的 APP，它可以把低成本、高效率、跨平台的 H5 技术和追求极致用户体验的 Native 技术混合在一起来为用户提供服务。而 Hybrid 技术实施的前提，是实现 H5 和 Native APP 之间的通信，这个实现，我们称之为 JSBridge。")]),t._v(" "),s("img",{attrs:{src:a(326)}}),t._v(" "),s("h4",{attrs:{id:"h5-调用-native-2-种方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#h5-调用-native-2-种方式"}},[t._v("#")]),t._v(" H5 调用 Native( 2 种方式)")]),t._v(" "),s("ul",[s("li",[t._v("1.理论上，无论是 iOS 还是 Android，提供的 WebView 容器是可以拦截一切 H5 发起的请求的，无论是标准协议（如 http://、https:// 等）还是私有协议（如 weixin:// ）。基于这个原理，H5 采用私有协议模拟发起 URL 请求，Native 解析这类 URL 并定制相应的处理函数，这就实现了 H5 调用 Native。")])]),t._v(" "),s("img",{attrs:{src:a(327)}}),t._v(" "),s("ul",[s("li",[t._v("2.在 Native 的开发中，开发者可以给 WebView 容器注入全局变量并挂载在 window 对象上，这样前端 js 就可以通过 window 上全局对象方法 来调用一些 Native 的方法。这里需要注意的是方法注入的时机，一般是 WebView 一旦加载页面就需要注入变量。")])]),t._v(" "),s("h4",{attrs:{id:"native-调用-h5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#native-调用-h5"}},[t._v("#")]),t._v(" Native 调用 H5")]),t._v(" "),s("p",[t._v("上面提到的给 WebView 容器注入全局变量并挂载在 window 对象上，实际上是 Native 代码执行了一个 evaluateJavaScript 函数，直接运行 js 字符串代码(类似 js 的 eval 函数)，从而实现注入。所以 Native 代码也一样可以通过这个 evaluateJavaScript 函数来调用约定好的 js 函数来实现 H5 的调用。")]),t._v(" "),s("img",{attrs:{src:a(328)}}),t._v(" "),s("h3",{attrs:{id:"_2-3、唤起app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、唤起app"}},[t._v("#")]),t._v(" 2.3、唤起APP")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.im/post/6869665966792376327#heading-0",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考地址"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/zhuanzhuanfe/call-app",target:"_blank",rel:"noopener noreferrer"}},[t._v("github地址"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("唤端一般包含了 "),s("strong",[t._v("唤起App")]),t._v(" 、 "),s("strong",[t._v("下载App")]),t._v(" 以及 "),s("strong",[t._v("唤起App失败后自动下载")]),t._v(" 这三个功能。")]),t._v(" "),s("img",{attrs:{src:a(329)}}),t._v(" "),s("p",[t._v("唤端所使用的技术，通常可以统称为Deep Link（深度链接）技术。不同平台对这项技术有着不同的实现，主流的有这几种：")]),t._v(" "),s("ul",[s("li",[t._v("URL Scheme（全平台通用）")]),t._v(" "),s("li",[t._v("Universal Link（通用链接，iOS系统专属）")]),t._v(" "),s("li",[t._v("App Links 以及衍生的 Chrome Intents（安卓系统专属）")])]),t._v(" "),s("p",[t._v("当然，以上只是国际通用标准，我们还需要考虑到“国内特色”，包括但不限于微信爸爸、微博、UC浏览器等这些环境的唤端，对于这些App，主流的唤端方式有这么几种")]),t._v(" "),s("ul",[s("li",[t._v("Universal Link（部分App可用，快被国内主流App禁干净了）")]),t._v(" "),s("li",[t._v("微信API launchApplication 和 getInstallState （需要申请白名单，难度很高）")]),t._v(" "),s("li",[t._v("微信开放标签 "),s("em",[t._v("wx-open-launch-app")]),t._v(" (微信推荐方式，需要审核，流程较繁琐)")]),t._v(" "),s("li",[t._v("跳转到应用宝，然后通过应用宝唤端 （适用于微信安卓环境）")]),t._v(" "),s("li",[t._v("弹出个蒙层，友好的提示用户，点击右上角按钮，然后选择在浏览器中打开 （easy~）")])]),t._v(" "),s("img",{attrs:{src:a(330)}}),t._v(" "),s("p",[t._v("主要介绍下 "),s("strong",[t._v("URL Scheme")]),t._v("、"),s("strong",[t._v("Universal Link")]),t._v("、"),s("strong",[t._v("微信唤端")]),t._v(" 和 "),s("strong",[t._v("自家公司App")]),t._v(" 四种技术场景下的唤端实现")]),t._v(" "),s("ul",[s("li",[t._v("URL Scheme：")])]),t._v(" "),s("p",[t._v("URL Scheme其实就是一个URL前面的协议部分，比如这个地址 https://m.zhuanzhuan.com，其中 https就是一个Scheme，代表这是一个https的地址。")]),t._v(" "),s("p",[t._v("我们再看一个地址 zhuanzhuan://jump/core/myBuyList/jump?tab=0，当我们访问这个地址的时候，如果系统中有注册 zhuanzhuan:// => 转转App，那么系统便会使用转转App打开这个链接了，接着App会解析URL的path和search部分，执行对应的操作。")]),t._v(" "),s("p",[t._v("那么如何向系统注册 zhuanzhuan 这个Scheme呢，安卓可以在 manifest 里通过 intent-filter 配置，iOS 则可以在 info.plist 文件中添加 URL types 来注册一个 Scheme。")]),t._v(" "),s("ul",[s("li",[t._v("Scheme的调用方法：")])]),t._v(" "),s("p",[t._v("Scheme的调用也十分简单，我们可以通过 "),s("strong",[t._v("location.href")]),t._v(" 或 "),s("strong",[t._v("iframe")]),t._v(" 或 "),s("strong",[t._v("a标签")]),t._v(" 来调用 这三种方式并无本质区别，都是让系统访问一个URL，只不过在某些环境下，当方法失效时，需要采用另一种形式。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SCHEMA_PATH 为 URL Scheme 地址")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// location.href 形式")]),t._v("\nwindow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SCHEMA_PATH")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a标签形式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\na"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"href"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SCHEMA_PATH")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\na"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// iframe形式")]),t._v("\niframe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'iframe'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\niframe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("frameBorder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\niframe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cssText "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'display:none;border:0;width:0;height:0;'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iframe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\niframe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SCHEMA_PATH")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("ul",[s("li",[t._v("唤端失败自动下载：")])]),t._v(" "),s("p",[t._v("使用URL Scheme会遇到一个棘手的问题，那就是我们无法得知是否成功唤起App。这个也可以理解，因为这个方式本质上就是访问一个URL，并没有特别的地方。")]),t._v(" "),s("p",[t._v("但是唤端失败（通常是用户没有装这个App），我们需要引导用户去下载，这就要求我们需要通过一些手段，去检测唤端是否成功。")]),t._v(" "),s("p",[t._v("常见的做法是通过监听页面是否在 n秒内 隐藏来判断是否成功唤起App，因为如果唤起，那当前页面必然已经退到后台去了。")]),t._v(" "),s("p",[t._v("所以我们处理的流程是这样：")]),t._v(" "),s("p",[t._v("1、当点击唤端后，定时器延时n秒(我们设定的是2.5秒)后执行下载操作"),s("br"),t._v("\n2、监听 visibilitychange 事件，如果页面隐藏，则表示唤端成功，清除定时器"),s("br"),t._v("\n3、如果 visibilitychange 事件没有被触发，那么就代表唤端失败，n秒后就会执行下载的操作")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// n秒后执行下载")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("__download")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delay"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面隐藏，那么代表已经调起了app，就清除下载的定时器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("visibilitychange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hidden "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webkitHidden"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  tag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"visibilitychange"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" visibilitychange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webkitvisibilitychange"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" visibilitychange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nwindow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pagehide"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("p",[t._v("不过这个方法有个致命问题，就是 n 应该取多少，不同的手机，唤端的时间并不一样。")]),t._v(" "),s("p",[t._v("时间设置太长，用户下载等待太久，会导致用户还没看到下载就退出了。\n时间设置太短，可能会导致还没有唤起App，就又同时执行了下载的逻辑。")]),t._v(" "),s("p",[t._v("这里我们经过测试，觉得n设置为2500ms-3000ms，是一个比较合适的值")]),t._v(" "),s("h2",{attrs:{id:"_3、移动端常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、移动端常见问题"}},[t._v("#")]),t._v(" 3、移动端常见问题")]),t._v(" "),s("h3",{attrs:{id:"_3-1、移动端1px边框问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1、移动端1px边框问题"}},[t._v("#")]),t._v(" 3-1、移动端1px边框问题")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.jianshu.com/p/fa670b737a29",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("移动端CSS里面写了1px，实际上看起来比1px粗；"),s("br"),t._v("\nUI设计师要求的1px是指设备的物理像素1px，而CSS里记录的像素是逻辑像素。"),s("br"),t._v("\n它们之间存在一个比例关系，可以用javascript中的"),s("code",[t._v("window.devicePixelRatio")]),t._v("来获取，也可以用媒体查询的"),s("code",[t._v("-webkit-min-device-pixel-ratio")]),t._v("来获取。")]),t._v(" "),s("p",[t._v("在手机上border无法达到我们想要的效果。这是因为"),s("code",[t._v("devicePixelRatio")]),t._v("特性导致，iPhone的devicePixelRatio==2，而border-width: 1px描述的是设备独立像素。"),s("br"),t._v("\n所以，border被放大到物理像素2px显示，在iPhone上就显得较粗。")]),t._v(" "),s("h4",{attrs:{id:"解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案：")]),t._v(" "),s("ul",[s("li",[t._v("1、媒体查询利用设备像素比缩放，设置小数像素")])]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px solid #999 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token atrule"}},[s("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" screen "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0.5px solid #999 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token atrule"}},[s("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" screen "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0.333333px solid #999 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("ul",[s("li",[t._v("2、媒体查询 + transfrom，对第一个方案的优化")])]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 2倍屏 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token atrule"}},[s("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("only")]),t._v(" screen "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border-bottom::after")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scaleY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0.5"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scaleY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0.5"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 3倍屏 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token atrule"}},[s("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("only")]),t._v(" screen "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-min-device-pixel-ratio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 3.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".border-bottom::after")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scaleY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0.33"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scaleY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0.33"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h3",{attrs:{id:"_3-2、h5页面窗口自动调整到设备宽度-并禁止用户缩放页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2、h5页面窗口自动调整到设备宽度-并禁止用户缩放页面"}},[t._v("#")]),t._v(" 3-2、H5页面窗口自动调整到设备宽度，并禁止用户缩放页面")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_3-3、移动端click屏幕产生300-ms的延迟响应"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3、移动端click屏幕产生300-ms的延迟响应"}},[t._v("#")]),t._v(" 3-3、移动端click屏幕产生300 ms的延迟响应")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/chaojidan/p/4517895.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[t._v("#")]),t._v(" 定义：")]),t._v(" "),s("p",[t._v("当用户一次点击屏幕之后，浏览器并不能立刻判断用户是要进行双击缩放，还是想要进行单击操作。因此，就会等待300毫秒，以判断用户是否再次点击了屏幕。")]),t._v(" "),s("h4",{attrs:{id:"解决方案-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方案-2"}},[t._v("#")]),t._v(" 解决方案：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("1、通过 meta 标签禁用网页的缩放")])]),t._v(" "),s("li",[s("p",[t._v("2、通过 meta 标签将网页的 viewport 设置为 ideal viewport。")])]),t._v(" "),s("li",[s("p",[t._v("3、FastClick")])])]),t._v(" "),s("p",[t._v("FastClick 是 FT Labs 专门为解决移动端浏览器 300 毫秒点击延迟问题所开发的一个轻量级的库。简而言之，FastClick 在检测到 touchend 事件的时候，会通过 DOM 自定义事件立即触发一个模拟click事件的自定义事件，并把浏览器在 300 毫秒之后真正触发的 click 事件阻止掉。")]),t._v(" "),s("h3",{attrs:{id:"_3-4、iphonex的-刘海-底部的安全区域。让页面不能占满屏幕"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4、iphonex的-刘海-底部的安全区域。让页面不能占满屏幕"}},[t._v("#")]),t._v(" 3-4、iphoneX的“刘海”，底部的安全区域。让页面不能占满屏幕")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.zhihu.com/question/66761606",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"解决方案-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方案-3"}},[t._v("#")]),t._v(" 解决方案：")]),t._v(" "),s("p",[t._v("添加viewport-fit=cover meta标签，使页面占满整个屏幕")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0, viewport-fit=cover"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_3-5、移动端滚动穿透问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5、移动端滚动穿透问题"}},[t._v("#")]),t._v(" 3-5、移动端滚动穿透问题")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.zhihu.com/question/66761606",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"定义-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义-2"}},[t._v("#")]),t._v(" 定义：")]),t._v(" "),s("p",[t._v("移动端弹出fixed弹窗的话，在弹窗上滑动会导致下层的页面跟着滚动，这个叫 “滚动穿透”")]),t._v(" "),s("h4",{attrs:{id:"解决方案-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方案-4"}},[t._v("#")]),t._v(" 解决方案：")]),t._v(" "),s("ul",[s("li",[t._v("1、先定义一个变量，用来记录document的scrollTop值")]),t._v(" "),s("li",[t._v("2、在弹窗显示的时候，将最新的document的scrollTop值赋值给之前定义的变量，然后将body设为fixed定位，将body的top值设为之前变量存储的值")]),t._v(" "),s("li",[t._v("3、在弹窗消失的时候，将body设为relative定位，将body的top值设为unset")])]),t._v(" "),s("h4",{attrs:{id:"vue-mixin代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-mixin代码"}},[t._v("#")]),t._v(" Vue Mixin代码：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mixin.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            scrollTop"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 距离顶端的值")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    watch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isShow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newVal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopBodyScroll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    methods"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopBodyScroll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("isFixed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("isFixed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n                    document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollingElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollY\n                document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fixed'")]),t._v("\n                document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'relative'")]),t._v("\n                document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unset'")]),t._v("\n                window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 回到原先的top")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br")])]),s("h2",{attrs:{id:"_4、axios怎么撤回一个请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、axios怎么撤回一个请求"}},[t._v("#")]),t._v(" 4、Axios怎么撤回一个请求")]),t._v(" "),s("h3",{attrs:{id:"一、使用-canceltoken-axios-0-22-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、使用-canceltoken-axios-0-22-0"}},[t._v("#")]),t._v(" 一、使用 CancelToken (Axios < 0.22.0)")]),t._v(" "),s("p",[t._v("基本用法")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" axios "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 创建取消令牌源")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" CancelToken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CancelToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" source "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CancelToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 发起请求")]),t._v("\naxios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api/data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cancelToken")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("thrown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isCancel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thrown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请求已取消'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thrown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理其他错误")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. 取消请求")]),t._v("\nsource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户主动取消操作'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("p",[t._v("完整示例")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cancel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\naxios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cancelToken")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CancelToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("executor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("c")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// executor 函数接收一个取消函数作为参数")]),t._v("\n    cancel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取消请求")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h3",{attrs:{id:"二、使用-abortcontroller-axios-≥-0-22-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、使用-abortcontroller-axios-≥-0-22-0"}},[t._v("#")]),t._v(" 二、使用 AbortController (Axios ≥ 0.22.0)")]),t._v(" "),s("p",[t._v("现代浏览器和 Node.js（v15+）支持的标准方法：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" controller "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbortController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\naxios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api/data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("signal")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signal\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CanceledError'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请求已取消'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取消请求")]),t._v("\ncontroller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("abort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h3",{attrs:{id:"三、最佳实践"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、最佳实践"}},[t._v("#")]),t._v(" 三、最佳实践")]),t._v(" "),s("p",[t._v("请求拦截器中统一处理")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 存储所有活动的控制器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" activeRequests "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\naxios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" requestId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果已有相同请求，取消前一个")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("activeRequests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("has")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requestId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    activeRequests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requestId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("abort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" controller "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbortController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  activeRequests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requestId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\naxios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" requestId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  activeRequests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requestId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" requestId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    activeRequests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requestId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);