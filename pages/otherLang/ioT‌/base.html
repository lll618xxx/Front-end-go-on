<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1、gatt基础 | 首页</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/Front-end-go-on/logo.png">
    <meta name="description" content="前端记录">
    
    <link rel="preload" href="/Front-end-go-on/assets/css/0.styles.9fa608bf.css" as="style"><link rel="preload" href="/Front-end-go-on/assets/js/app.9dce86df.js" as="script"><link rel="preload" href="/Front-end-go-on/assets/js/2.91199c1a.js" as="script"><link rel="preload" href="/Front-end-go-on/assets/js/47.3777d217.js" as="script"><link rel="prefetch" href="/Front-end-go-on/assets/js/10.0e1fdea3.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/11.361d35b3.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/12.d7e17549.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/13.a25d2e0d.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/14.8196c68b.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/15.2c1a10e2.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/16.bbac94ea.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/17.db28656e.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/18.0e9e87f1.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/19.0db4aca0.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/20.7e3f374d.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/21.0aa58771.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/22.c6bc5f56.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/23.52e2c4f5.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/24.2eafb7bf.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/25.7d20faf5.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/26.75b16f85.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/27.cdc55e5b.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/28.6b9fb52b.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/29.b5ace85c.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/3.31d6e83f.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/30.7120b4e2.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/31.d267b579.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/32.f6f21399.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/33.2e912aeb.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/34.0a41bd99.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/35.2548c1db.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/36.89abfbe4.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/37.ff98ffd3.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/38.98f58e8b.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/39.01f2f507.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/4.87fd48f7.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/40.8505c7c5.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/41.898e324e.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/42.ac0fd325.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/43.fd5b5012.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/44.9f68a46e.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/45.7a9fdabc.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/46.55c081e1.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/48.91a09d7d.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/49.dd127ff8.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/5.007fceb8.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/50.9ac4a358.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/51.bcf8b89a.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/52.65ae64ae.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/53.db8a07e8.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/6.a8750159.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/7.9c4b248b.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/8.10df2a34.js"><link rel="prefetch" href="/Front-end-go-on/assets/js/9.bde67678.js">
    <link rel="stylesheet" href="/Front-end-go-on/assets/css/0.styles.9fa608bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Front-end-go-on/" class="home-link router-link-active"><img src="/Front-end-go-on/logo.png" alt="首页" class="logo"> <span class="site-name can-hide">首页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Front-end-go-on/pages/frontend/base/Html.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/Front-end-go-on/pages/otherLang/node/base.html" class="nav-link">
  非前端
</a></div><div class="nav-item"><a href="/Front-end-go-on/pages/assit/chrome/Extension.html" class="nav-link">
  辅助
</a></div><div class="nav-item"><a href="https://github.com/lll618xxx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Front-end-go-on/pages/frontend/base/Html.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/Front-end-go-on/pages/otherLang/node/base.html" class="nav-link">
  非前端
</a></div><div class="nav-item"><a href="/Front-end-go-on/pages/assit/chrome/Extension.html" class="nav-link">
  辅助
</a></div><div class="nav-item"><a href="https://github.com/lll618xxx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>物联网</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Front-end-go-on/pages/otherLang/ioT‌/base.html" class="active sidebar-link">基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-go-on/pages/otherLang/ioT‌/base.html#_1、gatt基础" class="sidebar-link">1、gatt基础</a></li><li class="sidebar-sub-header"><a href="/Front-end-go-on/pages/otherLang/ioT‌/base.html#_2、mqtt基础" class="sidebar-link">2、mqtt基础</a></li><li class="sidebar-sub-header"><a href="/Front-end-go-on/pages/otherLang/ioT‌/base.html#_3、mqtt和gatt-的异同点" class="sidebar-link">3、mqtt和gatt 的异同点</a></li></ul></li><li><a href="/Front-end-go-on/pages/otherLang/ioT‌/mi.html" class="sidebar-link">米家相关</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Node</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Front-end-go-on/pages/otherLang/node/base.html" class="sidebar-link">Node基础</a></li><li><a href="/Front-end-go-on/pages/otherLang/node/frame.html" class="sidebar-link">Node进阶</a></li><li><a href="/Front-end-go-on/pages/otherLang/node/tool.html" class="sidebar-link">Node工具</a></li><li><a href="/Front-end-go-on/pages/otherLang/node/script.html" class="sidebar-link">Node脚本</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Front-end-go-on/pages/otherLang/linux/base.html" class="sidebar-link">Linux基础</a></li><li><a href="/Front-end-go-on/pages/otherLang/linux/env.html" class="sidebar-link">Linux环境</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>抓包</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Front-end-go-on/pages/otherLang/wireshark/whistle.html" class="sidebar-link">Whistle</a></li><li><a href="/Front-end-go-on/pages/otherLang/wireshark/fiddler.html" class="sidebar-link">Fiddler</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1、gatt基础"><a href="#_1、gatt基础" class="header-anchor">#</a> 1、gatt基础</h2> <ul><li><p>1、GATT 概述<br>
GATT 是建立在 ATT（Attribute Protocol）之上的高层协议，用于在BLE设备之间传输数据。<br>
GATT 定义了数据的组织方式（如服务、特征值等）以及设备之间的通信规则。<br>
GATT 采用客户端-服务器模型：<br>
    GATT 服务器：存储数据并提供数据访问（如传感器设备）。<br>
    GATT 客户端：向服务器请求数据或发送数据（如手机或中央设备）。</p></li> <li><p>2、GATT 数据结构</p></li></ul> <p>GATT 数据以层次化的方式组织，主要包括以下元素：</p> <p>  服务（Service）：<br>
    一个服务是相关功能的集合，包含一个或多个特征值。<br>
    每个服务由一个唯一的 UUID（通用唯一标识符）标识。<br>
    例如，心率服务（Heart Rate Service）的 UUID 是 0x180D。</p> <p>  特征值（Characteristic）：<br>
    特征值是服务中的具体数据项，包含一个值和描述其属性的元数据。<br>
    每个特征值也有一个唯一的 UUID。<br>
    例如，心率测量特征值（Heart Rate Measurement Characteristic）的 UUID 是 0x2A37。</p> <p>  描述符（Descriptor）：<br>
    描述符用于描述特征值的附加信息，例如通知使能（Client Characteristic Configuration Descriptor, CCCD）。</p> <p>  属性（Attribute）：<br>
    GATT 数据的最小单位，包含一个句柄（Handle）、UUID、值和权限。</p> <ul><li>3、GATT 操作（GATT 客户端可以通过以下操作与服务器交互）</li></ul> <p>读取（Read）：客户端从服务器读取特征值或描述符的值。<br>
写入（Write）：客户端向服务器写入特征值或描述符的值。<br>
通知（Notify）：服务器主动向客户端发送数据，客户端无需确认。<br>
指示（Indicate）：服务器主动向客户端发送数据，客户端需要确认。<br>
发现（Discover）：客户端发现服务器上的服务、特征值和描述符。</p> <ul><li>4、GATT 连接过程（通常包括以下步骤）</li></ul> <p>设备发现：客户端通过扫描发现附近的BLE设备。<br>
建立连接：客户端与目标设备建立连接。<br>
服务发现：客户端发现服务器上的服务。<br>
特征值发现：客户端发现服务中的特征值。<br>
数据交互：客户端通过读取、写入、通知或指示与服务器交互数据。</p> <h2 id="_2、mqtt基础"><a href="#_2、mqtt基础" class="header-anchor">#</a> 2、mqtt基础</h2> <ul><li>1、 MQTT 概述</li></ul> <p>MQTT 是一种基于客户端-服务器架构的协议，采用发布/订阅模式。<br>
设计目标：轻量、高效、低带宽占用，适合资源受限的设备。<br>
主要应用场景：物联网、传感器网络、移动应用、智能家居等。</p> <ul><li>2、MQTT 核心概念</li></ul> <p>  客户端（Client）：<br>
    发布或订阅消息的设备或应用程序。<br>
    可以是传感器、手机、服务器等。</p> <p>  服务器（Broker）：<br>
    负责接收客户端发布的消息，并将其转发给订阅了相关主题的客户端。</p> <p>  主题（Topic）：<br>
    消息的分类标签，采用分层结构（如 home/livingroom/temperature）。<br>
    客户端通过订阅主题来接收相关消息。</p> <p>  消息（Message）：<br>
    客户端发布的数据，包含主题和有效载荷（Payload）。</p> <p>  QoS（Quality of Service）：<br>
    定义消息传递的服务质量等级，分为 0、1、2 三个级别。</p> <p>  保留消息（Retained Message）：<br>
    服务器会保存最后一条发布到某个主题的消息，新订阅者会立即收到该消息。</p> <p>  遗嘱消息（Last Will and Testament, LWT）：<br>
    客户端意外断开时，服务器会发布预先设置的遗嘱消息。</p> <ul><li>3.、MQTT 连接过程</li></ul> <p>1.建立 TCP 连接：客户端与服务器建立 TCP 连接（默认端口 1883，加密端口 8883）。<br>
2.发送 CONNECT 报文：客户端发送 CONNECT 报文，包含客户端 ID、用户名、密码等信息。<br>
3.服务器响应 CONNACK：服务器验证客户端信息后，返回 CONNACK 报文，确认连接成功。<br>
4.发布/订阅消息：客户端可以发布消息或订阅主题。<br>
5.保持连接：客户端通过定期发送 PINGREQ 报文保持连接。<br>
6.断开连接：客户端发送 DISCONNECT 报文，断开连接。</p> <ul><li>4、MQTT 报文类型</li></ul> <p>CONNECT：客户端请求连接到服务器。<br>
CONNACK：服务器确认连接。<br>
PUBLISH：发布消息。<br>
PUBACK：确认收到 QoS 1 的消息。<br>
PUBREC：确认收到 QoS 2 的消息（第一步）。<br>
PUBREL：确认收到 QoS 2 的消息（第二步）。<br>
PUBCOMP：完成 QoS 2 的消息传递。<br>
SUBSCRIBE：订阅主题。<br>
SUBACK：确认订阅。<br>
UNSUBSCRIBE：取消订阅。<br>
UNSUBACK：确认取消订阅。<br>
PINGREQ：客户端发送心跳请求。<br>
PINGRESP：服务器响应心跳请求。<br>
DISCONNECT：客户端断开连接。</p> <ul><li>5、QoS 服务质量</li></ul> <p>QoS 0：最多一次（At most once），消息可能丢失。<br>
QoS 1：至少一次（At least once），消息可能重复。<br>
QoS 2：恰好一次（Exactly once），消息不丢失且不重复。</p> <h2 id="_3、mqtt和gatt-的异同点"><a href="#_3、mqtt和gatt-的异同点" class="header-anchor">#</a> 3、mqtt和gatt 的异同点</h2> <h4 id="相同点"><a href="#相同点" class="header-anchor">#</a> 相同点</h4> <ul><li><p>1、物联网应用：<br>
均广泛用于物联网（IoT）场景，支持设备间的数据传输。</p></li> <li><p>2、低功耗设计：<br>
针对资源受限的设备（如传感器、可穿戴设备）优化，强调低功耗。</p></li> <li><p>3、异步通信：<br>
支持非实时或事件驱动的数据传输模式。</p></li></ul> <h4 id="核心差异"><a href="#核心差异" class="header-anchor">#</a> 核心差异</h4> <table><thead><tr><th style="text-align:center;">特性</th> <th style="text-align:center;">MQTT</th> <th style="text-align:center;">GATT</th></tr></thead> <tbody><tr><td style="text-align:center;">协议层级</td> <td style="text-align:center;">应用层协议（基于 TCP/IP）</td> <td style="text-align:center;">蓝牙低功耗（BLE）协议栈的一部分</td></tr> <tr><td style="text-align:center;">通信模型</td> <td style="text-align:center;">发布/订阅（Pub-Sub）模型</td> <td style="text-align:center;">客户端-服务器（Client-Server）模型</td></tr> <tr><td style="text-align:center;">连接方式</td> <td style="text-align:center;">依赖 MQTT Broker（代理服务器）</td> <td style="text-align:center;">直接通过蓝牙连接（点对点）</td></tr> <tr><td style="text-align:center;">传输距离</td> <td style="text-align:center;">支持远程通信（通过互联网）</td> <td style="text-align:center;">短距离（蓝牙范围，通常 &lt;100 米）</td></tr> <tr><td style="text-align:center;">数据格式</td> <td style="text-align:center;">灵活（支持任意二进制或文本数据）</td> <td style="text-align:center;">结构化数据（基于 BLE 的 Attribute）</td></tr> <tr><td style="text-align:center;">典型应用场景</td> <td style="text-align:center;">远程监控、云端设备管理</td> <td style="text-align:center;">近场设备交互（如手机与智能手表）</td></tr> <tr><td style="text-align:center;">协议依赖</td> <td style="text-align:center;">需要 IP 网络（Wi-Fi/蜂窝网络等）</td> <td style="text-align:center;">依赖蓝牙协议栈（无需 IP 网络）</td></tr> <tr><td style="text-align:center;">安全性</td> <td style="text-align:center;">支持 TLS/SSL 加密</td> <td style="text-align:center;">依赖蓝牙的配对和加密机制</td></tr> <tr><td style="text-align:center;">标准化组织</td> <td style="text-align:center;">OASIS</td> <td style="text-align:center;">Bluetooth SIG</td></tr></tbody></table> <h4 id="适用场景选择"><a href="#适用场景选择" class="header-anchor">#</a> 适用场景选择</h4> <ul><li><p>1、选择 MQTT 的情况：<br>
需要跨地域、跨网络的设备通信（如远程传感器上报数据）。<br>
多对多通信（多个设备订阅同一主题）。<br>
需要与云端服务（如 AWS IoT、Azure IoT）集成。</p></li> <li><p>2、选择 GATT 的情况：<br>
短距离点对点通信（如手机控制蓝牙耳机）。<br>
低功耗设备（如电池供电的传感器）。<br>
无需互联网连接的本地交互场景。</p></li></ul> <h4 id="技术细节对比"><a href="#技术细节对比" class="header-anchor">#</a> 技术细节对比</h4> <ul><li><p>1、MQTT 核心概念：<br>
主题（Topic）：设备通过订阅主题接收消息。<br>
QoS（服务质量）：0/1/2 三种消息可靠性级别。<br>
Broker：中心化的消息代理（如 Mosquitto、EMQX）。</p></li> <li><p>2、GATT 核心概念：<br>
Service（服务）：定义设备功能（如心率监测服务）。<br>
Characteristic（特征）：具体的数据属性（如心率值）。<br>
UUID：唯一标识服务和特征。</p></li></ul> <h4 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h4> <p>MQTT 是互联网场景下的轻量级消息协议，适合需要远程、多设备协作的物联网系统。<br>
GATT 是蓝牙近场通信的核心协议，适合低功耗、短距离的本地设备交互。<br>
根据项目需求（距离、网络环境、设备类型）选择合适的协议，也可结合两者（例如：BLE 设备通过网关使用 MQTT 上传数据到云端）。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">lastUpdate:</span> <span class="time">2/15/2025, 3:09:25 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Front-end-go-on/pages/otherLang/ioT‌/mi.html">
        米家相关
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Front-end-go-on/assets/js/app.9dce86df.js" defer></script><script src="/Front-end-go-on/assets/js/2.91199c1a.js" defer></script><script src="/Front-end-go-on/assets/js/47.3777d217.js" defer></script>
  </body>
</html>
